<div class="commande-list-container p-24">
  <div class="d-flex align-items-center justify-content-between m-b-24">
    <div>
      <h4 class="f-s-24 f-w-700 m-b-4">Mes Commandes</h4>
      <p class="text-muted m-0">Consultez l'historique et le statut de vos achats</p>
    </div>
    <button mat-flat-button color="primary" routerLink="/accueil">
      NOUVELLE COMMANDE <i-tabler name="plus" class="icon-18 m-l-4"></i-tabler>
    </button>
  </div>

  <div *ngIf="loading" class="d-flex justify-content-center p-48">
    <mat-spinner diameter="40"></mat-spinner>
  </div>

  <!-- Empty State -->
  <div
    *ngIf="!loading && commandes.length === 0"
    class="text-center p-48 bg-light rounded shadow-sm"
  >
    <div class="empty-icon m-b-24">
      <i-tabler name="receipt-off" class="icon-64 text-muted opacity-2"></i-tabler>
    </div>
    <h5 class="f-s-18 f-w-700">Aucune commande trouvée</h5>
    <p class="text-muted m-b-24">Vous n'avez pas encore passé de commande sur notre plateforme.</p>
    <button mat-stroked-button color="primary" routerLink="/accueil">DÉCOUVRIR LES PRODUITS</button>
  </div>

  <!-- Orders Table/List -->
  <div *ngIf="!loading && commandes.length > 0">
    <mat-card class="cardWithShadow overflow-hidden">
      <div class="table-responsive">
        <table class="table align-middle text-nowrap m-0">
          <thead class="bg-light">
            <tr>
              <th class="p-16 f-s-14 f-w-600">N° Commande</th>
              <th class="p-16 f-s-14 f-w-600">Date</th>
              <th class="p-16 f-s-14 f-w-600">Mode</th>
              <th class="p-16 f-s-14 f-w-600">Total</th>
              <th class="p-16 f-s-14 f-w-600">Statut</th>
              <th class="p-16 f-s-14 f-w-600 text-end">Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let cmd of commandes" class="hover-row">
              <td class="p-16">
                <span class="f-w-700 text-dark">#{{ cmd.numeroCommande }}</span>
              </td>
              <td class="p-16 text-muted">{{ cmd.createdAt | date: 'short' }}</td>
              <td class="p-16">
                <div class="d-flex align-items-center">
                  <i-tabler
                    [name]="cmd.typedelivery === 'collect' ? 'package' : 'truck-delivery'"
                    class="icon-18 m-r-8 text-muted"
                  ></i-tabler>
                  <span class="f-s-14">{{ cmd.typedelivery.replace('_', ' ') | titlecase }}</span>
                </div>
              </td>
              <td class="p-16 f-w-700 text-primary">
                {{ cmd.total | currency: 'MGA' : 'Ar ' : '1.0-0' }}
              </td>
              <td class="p-16">
                <span class="badge" [ngClass]="'bg-' + getStatusColor(cmd.statusLivraison)">
                  {{ getStatusLabel(cmd.statusLivraison) }}
                </span>
              </td>
              <td class="p-16 text-end">
                <button
                  mat-icon-button
                  color="primary"
                  [routerLink]="['/commandes/details', cmd._id]"
                  matTooltip="Voir les détails"
                >
                  <i-tabler name="eye" class="icon-20"></i-tabler>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </mat-card>
  </div>
</div>
