<div class="blank-layout-container justify-content-center align-items-center bg-light">
  <div
    class="position-relative row w-100 h-100 bg-gradient justify-content-center align-items-center"
  >
    <div class="col-lg-10 col-xl-9 d-flex align-items-center">
      <mat-card class="cardWithShadow boxed-auth w-100">
        <mat-card-content class="p-40">
          <!-- Logo Section -->
          <div class="text-center mb-4">
            <a [routerLink]="['/']" class="app-brand">
              <span class="app-brand__icon bg-light-primary text-primary">
                <i-tabler name="building-store" class="icon-20 d-flex"></i-tabler>
              </span>
              <span class="app-brand__name">MarketPlace</span>
            </a>
          </div>

          <!-- Title Section -->
          <div class="main-title">
            <h2>Créer un compte boutique</h2>
            <p class="subtitle">Remplissez les informations ci-dessous pour créer votre boutique</p>
          </div>

          <!-- Form -->
          <form class="registration-form" [formGroup]="form" (ngSubmit)="submit()">
            <div class="row g-4">
              <!-- Left Column: User Information -->
              <div class="col-12 col-lg-6">
                <div class="form-section">
                  <div class="section-header">
                    <mat-icon class="section-icon">person</mat-icon>
                    <h3>Informations utilisateur</h3>
                  </div>

                  <div class="section-content">
                    <!-- Nom & Prenom Row -->
                    <div class="row g-3">
                      <div class="col-12 col-sm-6">
                        <mat-label class="form-label">Nom</mat-label>
                        <mat-form-field appearance="outline" class="w-100" color="primary">
                          <input matInput formControlName="nom" autocomplete="family-name" />
                          <mat-icon matPrefix class="field-icon">badge</mat-icon>
                          <mat-error *ngIf="f.nom.touched && f.nom.hasError('required')">
                            Le nom est requis.
                          </mat-error>
                          <mat-error *ngIf="f.nom.touched && f.nom.hasError('minlength')">
                            2 caractères minimum.
                          </mat-error>
                        </mat-form-field>
                      </div>

                      <div class="col-12 col-sm-6">
                        <mat-label class="form-label">Prénom</mat-label>
                        <mat-form-field appearance="outline" class="w-100" color="primary">
                          <input matInput formControlName="prenom" autocomplete="given-name" />
                          <mat-icon matPrefix class="field-icon">badge</mat-icon>
                          <mat-error *ngIf="f.prenom.touched && f.prenom.hasError('required')">
                            Le prénom est requis.
                          </mat-error>
                          <mat-error *ngIf="f.prenom.touched && f.prenom.hasError('minlength')">
                            2 caractères minimum.
                          </mat-error>
                        </mat-form-field>
                      </div>
                    </div>

                    <!-- Email -->
                    <div class="form-group">
                      <mat-label class="form-label">Email</mat-label>
                      <mat-form-field appearance="outline" class="w-100" color="primary">
                        <input matInput type="email" formControlName="email" autocomplete="email" />
                        <mat-icon matPrefix class="field-icon">email</mat-icon>
                        <mat-error *ngIf="f.email.touched && f.email.hasError('required')">
                          L'email est requis.
                        </mat-error>
                        <mat-error *ngIf="f.email.touched && f.email.hasError('email')">
                          Format d'email invalide.
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <!-- Telephone -->
                    <div class="form-group">
                      <mat-label class="form-label">Téléphone</mat-label>
                      <mat-form-field appearance="outline" class="w-100" color="primary">
                        <input
                          matInput
                          type="tel"
                          formControlName="telephone"
                          placeholder="+261320000000"
                          autocomplete="tel"
                        />
                        <mat-icon matPrefix class="field-icon">phone</mat-icon>
                        <mat-error *ngIf="f.telephone.touched && f.telephone.hasError('required')">
                          Le téléphone est requis.
                        </mat-error>
                        <mat-error *ngIf="f.telephone.touched && f.telephone.hasError('pattern')">
                          Format attendu : +261320000000 ou 0320000000.
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <!-- Password -->
                    <div class="form-group">
                      <mat-label class="form-label">Mot de passe</mat-label>
                      <mat-form-field appearance="outline" class="w-100" color="primary">
                        <input
                          matInput
                          [type]="hidePassword ? 'password' : 'text'"
                          formControlName="password"
                          autocomplete="new-password"
                        />
                        <mat-icon matPrefix class="field-icon">lock</mat-icon>
                        <button
                          mat-icon-button
                          matSuffix
                          (click)="hidePassword = !hidePassword"
                          type="button"
                          class="toggle-password"
                        >
                          <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
                        </button>
                        <mat-error *ngIf="f.password.touched && f.password.hasError('required')">
                          Le mot de passe est requis.
                        </mat-error>
                        <mat-error *ngIf="f.password.touched && f.password.hasError('minlength')">
                          Au moins 6 caractères.
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <!-- Confirm Password -->
                    <div class="form-group">
                      <mat-label class="form-label">Confirmer le mot de passe</mat-label>
                      <mat-form-field appearance="outline" class="w-100" color="primary">
                        <input
                          matInput
                          [type]="hideConfirmPassword ? 'password' : 'text'"
                          formControlName="confirmPassword"
                          autocomplete="new-password"
                        />
                        <mat-icon matPrefix class="field-icon">lock</mat-icon>
                        <button
                          mat-icon-button
                          matSuffix
                          (click)="hideConfirmPassword = !hideConfirmPassword"
                          type="button"
                          class="toggle-password"
                        >
                          <mat-icon>{{
                            hideConfirmPassword ? 'visibility_off' : 'visibility'
                          }}</mat-icon>
                        </button>
                        <mat-error
                          *ngIf="
                            f.confirmPassword.touched && f.confirmPassword.hasError('required')
                          "
                        >
                          Confirmez le mot de passe.
                        </mat-error>
                        <mat-error
                          *ngIf="
                            form.hasError('passwordsMismatch') &&
                            (f.confirmPassword.touched || f.password.touched)
                          "
                        >
                          Les mots de passe doivent être identiques.
                        </mat-error>
                      </mat-form-field>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Right Column: Shop Information -->
              <div class="col-12 col-lg-6" formGroupName="boutique">
                <div class="form-section">
                  <div class="section-header">
                    <mat-icon class="section-icon">store</mat-icon>
                    <h3>Informations boutique</h3>
                  </div>

                  <div class="section-content">
                    <!-- Shop Name -->
                    <div class="form-group">
                      <mat-label class="form-label">Nom de la boutique</mat-label>
                      <mat-form-field appearance="outline" class="w-100" color="primary">
                        <input matInput formControlName="nom" />
                        <mat-icon matPrefix class="field-icon">storefront</mat-icon>
                        <mat-error *ngIf="b['nom'].touched && b['nom'].hasError('required')">
                          Le nom est requis.
                        </mat-error>
                        <mat-error *ngIf="b['nom'].touched && b['nom'].hasError('minlength')">
                          2 caractères minimum.
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <!-- Address -->
                    <div class="form-group">
                      <mat-label class="form-label">Adresse</mat-label>
                      <mat-form-field appearance="outline" class="w-100" color="primary">
                        <input matInput formControlName="adresse" autocomplete="street-address" />
                        <mat-icon matPrefix class="field-icon">location_on</mat-icon>
                        <mat-error
                          *ngIf="b['adresse'].touched && b['adresse'].hasError('required')"
                        >
                          L'adresse est requise.
                        </mat-error>
                        <mat-error
                          *ngIf="b['adresse'].touched && b['adresse'].hasError('minlength')"
                        >
                          3 caractères minimum.
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <!-- Shop Phone -->
                    <div class="form-group">
                      <mat-label class="form-label">Téléphone de la boutique</mat-label>
                      <mat-form-field appearance="outline" class="w-100" color="primary">
                        <input
                          matInput
                          type="tel"
                          formControlName="telephone"
                          placeholder="+261320000000"
                          autocomplete="tel"
                        />
                        <mat-icon matPrefix class="field-icon">phone_in_talk</mat-icon>
                        <mat-error
                          *ngIf="b['telephone'].touched && b['telephone'].hasError('required')"
                        >
                          Le téléphone est requis.
                        </mat-error>
                        <mat-error
                          *ngIf="b['telephone'].touched && b['telephone'].hasError('pattern')"
                        >
                          Format attendu : +261320000000 ou 0320000000.
                        </mat-error>
                      </mat-form-field>
                    </div>

                    <!-- Info Box -->
                    <div class="info-box">
                      <mat-icon>info</mat-icon>
                      <div class="info-content">
                        <strong>Information importante</strong>
                        <p>
                          Ces informations seront visibles par vos clients et pourront être
                          modifiées plus tard.
                        </p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Server Error -->
            <div *ngIf="serverError" class="alert alert-danger" role="alert">
              <mat-icon class="alert-icon">error_outline</mat-icon>
              <span>{{ serverError }}</span>
            </div>

            <!-- Submit Button -->
            <button
              type="submit"
              mat-flat-button
              color="primary"
              class="w-100 submit-btn"
              [disabled]="form.invalid || isSubmitting"
            >
              <span *ngIf="!isSubmitting">
                <mat-icon class="btn-icon">store</mat-icon>
                Créer ma boutique
              </span>
              <span *ngIf="isSubmitting">
                <mat-spinner diameter="20" class="d-inline-block me-2"></mat-spinner>
                Création en cours...
              </span>
            </button>
          </form>

          <!-- Login Link -->
          <div class="text-center m-t-30">
            <span class="text-muted">Déjà un compte ?</span>
            <a [routerLink]="['/authentication/login']" class="link-primary ms-1"> Se connecter </a>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
