<div class="blank-layout-container justify-content-center align-items-center bg-light">
  <div class="position-relative row w-100 h-100 bg-gredient justify-content-center">
    <div class="col-lg-4 d-flex align-items-center">
      <mat-card class="cardWithShadow boxed-auth">
        <mat-card-content class="p-32">
          <div class="text-center">
            <a [routerLink]="['/']">
              <img src="./assets/images/logos/dark-logo.svg" class="align-middle m-2" alt="logo" />
            </a>
          </div>

          <!--          <div class="or-border m-t-30">Creer un compte client</div>-->

          <div class="or-border m-t-30 m-b-30">
            <span>Cr√©er un compte client</span>
          </div>

          <form class="m-t-30" [formGroup]="form" (ngSubmit)="submit()">
            <div class="row">
              <div class="col-12 col-sm-6">
                <mat-label class="f-s-14 f-w-600 m-b-12 d-block">Nom</mat-label>
                <mat-form-field appearance="outline" class="w-100" color="primary">
                  <input matInput formControlName="nom" autocomplete="family-name" />
                  <mat-error *ngIf="f.nom.touched && f.nom.hasError('required')"
                    >Le nom est requis.</mat-error
                  >
                  <mat-error *ngIf="f.nom.touched && f.nom.hasError('minlength')"
                    >2 caracteres minimum.</mat-error
                  >
                </mat-form-field>
              </div>
              <div class="col-12 col-sm-6">
                <mat-label class="f-s-14 f-w-600 m-b-12 d-block">Prenom</mat-label>
                <mat-form-field appearance="outline" class="w-100" color="primary">
                  <input matInput formControlName="prenom" autocomplete="given-name" />
                  <mat-error *ngIf="f.prenom.touched && f.prenom.hasError('required')"
                    >Le prenom est requis.</mat-error
                  >
                  <mat-error *ngIf="f.prenom.touched && f.prenom.hasError('minlength')"
                    >2 caracteres minimum.</mat-error
                  >
                </mat-form-field>
              </div>
            </div>

            <mat-label class="f-s-14 f-w-600 m-b-12 d-block">Email</mat-label>
            <mat-form-field appearance="outline" class="w-100" color="primary">
              <input matInput type="email" formControlName="email" autocomplete="email" />
              <mat-icon matPrefix class="field-icon">email</mat-icon>
              <mat-error *ngIf="f.email.touched && f.email.hasError('required')"
                >L'email est requis.</mat-error
              >
              <mat-error *ngIf="f.email.touched && f.email.hasError('email')"
                >Format d'email invalide.</mat-error
              >
            </mat-form-field>

            <mat-label class="f-s-14 f-w-600 m-b-12 d-block">Telephone</mat-label>
            <mat-form-field appearance="outline" class="w-100" color="primary">
              <input
                matInput
                type="tel"
                formControlName="telephone"
                placeholder="+261340000000"
                autocomplete="tel"
              />
              <mat-icon matPrefix class="field-icon">phone</mat-icon>
              <mat-error *ngIf="f.telephone.touched && f.telephone.hasError('required')"
                >Le telephone est requis.</mat-error
              >
              <mat-error *ngIf="f.telephone.touched && f.telephone.hasError('pattern')"
                >Format attendu : +261340000000 ou 0327283840.</mat-error
              >
            </mat-form-field>

            <mat-label class="f-s-14 f-w-600 m-b-12 d-block">Mot de passe</mat-label>
            <mat-form-field appearance="outline" class="w-100" color="primary">
              <input
                matInput
                [type]="hidePassword ? 'password' : 'text'"
                formControlName="password"
                autocomplete="new-password"
              />
              <mat-icon matPrefix class="field-icon">lock</mat-icon>
              <button
                mat-icon-button
                matSuffix
                (click)="hidePassword = !hidePassword"
                type="button"
                class="toggle-password"
              >
                <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>
              </button>
              <mat-error *ngIf="f.password.touched && f.password.hasError('required')"
                >Le mot de passe est requis.</mat-error
              >
              <mat-error *ngIf="f.password.touched && f.password.hasError('minlength')"
                >Au moins 6 caracteres.</mat-error
              >
            </mat-form-field>

            <mat-label class="f-s-14 f-w-600 m-b-12 d-block">Confirmer le mot de passe</mat-label>
            <mat-form-field appearance="outline" class="w-100" color="primary">
              <input
                matInput
                [type]="hideConfirmPassword ? 'password' : 'text'"
                formControlName="confirmPassword"
                autocomplete="new-password"
              />
              <mat-icon matPrefix class="field-icon">lock</mat-icon>
              <button
                mat-icon-button
                matSuffix
                (click)="hideConfirmPassword = !hideConfirmPassword"
                type="button"
                class="toggle-password"
              >
                <mat-icon>{{ hideConfirmPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
              </button>
              <mat-error
                *ngIf="f.confirmPassword.touched && f.confirmPassword.hasError('required')"
              >
                Confirmez le mot de passe.
              </mat-error>
              <mat-error
                *ngIf="
                  form.hasError('passwordsMismatch') &&
                  (f.confirmPassword.touched || f.password.touched)
                "
              >
                Les mots de passe doivent etre identiques.
              </mat-error>
            </mat-form-field>

            <div *ngIf="serverError" class="text-danger f-s-14 m-b-12">{{ serverError }}</div>

            <button
              type="submit"
              mat-flat-button
              color="primary"
              class="w-100"
              [disabled]="form.invalid || isSubmitting"
            >
              {{ isSubmitting ? 'Creation en cours...' : 'Creer mon compte client' }}
            </button>
            <!-- input -->
          </form>
          <span class="d-block f-w-500 text-center m-t-24">
            Deja un compte ?
            <a
              [routerLink]="['/authentication/login']"
              class="text-decoration-none text-primary f-w-500 f-s-14"
            >
              Se connecter</a
            >
          </span>
        </mat-card-content>
      </mat-card>
    </div>
  </div>
</div>
